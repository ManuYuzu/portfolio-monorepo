# .husky/pre-commit
prettier $(git diff --cached --name-only --diff-filter=ACMR | sed 's| |\\ |g') --write --ignore-unknown
git update-index --again
cd apps/backend && npx prisma generate

# Ejecuta los tests relacionados a los archivos staged
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.(ts|js)$' | tr '\n' ' ')
if [ -n "$STAGED_FILES" ]; then
	npx jest --findRelatedTests $STAGED_FILES
fi